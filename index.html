<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <title>CDCULT Check</title>
  <style>
    body {
      background-color: #000;
      color: #fff;
      font-family: 'Courier New', Courier, monospace;
      margin: 0;
      padding: 20px;
      text-align: center;
    }

    .container {
      max-width: 500px;
      margin: 40px auto;
    }

    h1 {
      font-size: 32px;
      font-weight: bold;
      letter-spacing: 1px;
      margin-bottom: 20px;
    }

    h2 {
      font-size: 24px;
      font-weight: normal;
      margin-bottom: 40px;
      color: #aaa;
    }

    .btn {
      background-color: #333;
      color: #fff;
      border: 1px solid #555;
      border-radius: 0;
      padding: 12px 24px;
      width: 150px;
      height: 60px;
      font-family: 'Courier New', Courier, monospace;
      font-size: 16px;
      cursor: pointer;
      margin: 10px auto;
      display: block;
      transition: background-color 0.3s;
    }

    .input-container {
      display: none;
      margin-top: 30px;
    }

    .input-field {
      width: 300px;
      height: 60px;
      background-color: #111;
      border: 1px solid #555;
      border-radius: 0;
      color: #fff;
      font-family: 'Courier New', Courier, monospace;
      font-size: 16px;
      padding: 10px;
      margin: 10px auto;
      display: block;
      text-align: center;
    }

    .input-field::placeholder {
      color: #777;
    }

    .status {
      margin-top: 30px;
      padding: 20px;
      font-weight: bold;
      font-size: 18px;
      text-align: center;
      border-radius: 0;
      display: none;
      min-height: 100px;
      display: flex;
      align-items: center;
      justify-content: center;
      width: 300px;
      height: 100px;
      margin: 30px auto;
    }

    .status.sent {
      background-color: #1a471a;
      border: 2px solid #2ecc71;
      color: #2ecc71;
    }

    .status.rejected {
      background-color: #471a1a;
      border: 2px solid #e74c3c;
      color: #e74c3c;
    }

    .status.moderation {
      background-color: #222;
      border: 2px solid #555;
      color: #fff;
    }
  </style>
</head>
<body>

  <div class="container">

    <h1>CDCULT Check</h1>
    <h2>–£–ó–ù–ê–¢–¨ –°–û–°–¢–û–Ø–ù–ò–ï –†–ï–õ–ò–ó–ê</h2>

    <button class="btn" id="showForm">–£–ó–ù–ê–¢–¨</button>

    <div class="input-container" id="formContainer"></div>

    <div class="status" id="statusOutput"></div>

  </div>

  <script>
    const SCRIPT_URL = 'https://script.google.com/macros/s/AKfycbwjvB_u2ok2UgkKEkKuFMwZT5L0LwO_xFLbiEyXENLfx72zkCcL6wf41jCRrHfq0HA/exec';

    document.getElementById('showForm').addEventListener('click', () => {
      // –°–∫—Ä—ã–≤–∞–µ–º –∫–Ω–æ–ø–∫—É "–£–ó–ù–ê–¢–¨"
      document.getElementById('showForm').style.display = 'none';

      // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –ø–æ–ª—è –≤–≤–æ–¥–∞
      const formContainer = document.getElementById('formContainer');
      formContainer.style.display = 'block';
      formContainer.innerHTML = `
        <input type="text" class="input-field" id="releaseName" placeholder="–ù–∞–∑–≤–∞–Ω–∏–µ —Ä–µ–ª–∏–∑–∞">
        <input type="text" class="input-field" id="mainArtists" placeholder="–û—Å–Ω–æ–≤–Ω—ã–µ –∞—Ä—Ç–∏—Å—Ç—ã">
        <button class="btn" id="submitForm">–ü–†–û–í–ï–†–ò–¢–¨</button>
      `;

      // –ü—Ä–∏–≤—è–∑—ã–≤–∞–µ–º —Å–æ–±—ã—Ç–∏–µ –∫ –Ω–æ–≤–æ–π –∫–Ω–æ–ø–∫–µ
      document.getElementById('submitForm').addEventListener('click', checkStatus);
    });

   function checkStatus() {
  const releaseName = document.getElementById('releaseName').value.trim();
  const mainArtists = document.getElementById('mainArtists').value.trim();

  if (!releaseName || !mainArtists) {
    alert('–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –∑–∞–ø–æ–ª–Ω–∏—Ç–µ –æ–±–∞ –ø–æ–ª—è');
    return;
  }

  fetch(SCRIPT_URL)
    .then(response => response.json())
    .then(data => {
      // üîç –ò–©–ï–ú –¢–û–ß–ù–û–ï –°–û–í–ü–ê–î–ï–ù–ò–ï
      const found = data.find(item =>
        item.releaseName === releaseName &&
        item.mainArtists === mainArtists
      );

      const statusDiv = document.getElementById('statusOutput');

      if (found) {
        const status = found.statusColor;
        if (status === 'green') {
          statusDiv.textContent = '–û–¢–ü–†–ê–í–õ–ï–ù';
          statusDiv.className = 'status sent';
        } else if (status === 'red') {
          statusDiv.textContent = '–û–¢–ö–õ–û–ù–Å–ù';
          statusDiv.className = 'status rejected';
        } else {
          statusDiv.textContent = '–í –ú–û–î–ï–†–ê–¶–ò–ò';
          statusDiv.className = 'status moderation';
        }
      } else {
        statusDiv.textContent = '–ù–ï –ù–ê–ô–î–ï–ù–û';
        statusDiv.className = 'status moderation';
      }

      statusDiv.style.display = 'flex';
    })
    .catch(error => {
      console.error('–û—à–∏–±–∫–∞:', error);
      document.getElementById('statusOutput').textContent = '–û–®–ò–ë–ö–ê –°–í–Ø–ó–ò';
      document.getElementById('statusOutput').className = 'status moderation';
      document.getElementById('statusOutput').style.display = 'flex';
    });
}
